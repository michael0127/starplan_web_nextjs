# é‚®ç®±éªŒè¯æµç¨‹å›¾ ğŸ“Š

## ğŸ¯ å®Œæ•´æµç¨‹å¯è§†åŒ–

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ç”¨æˆ·æ³¨å†Œ & é‚®ç®±éªŒè¯æµç¨‹                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ç¬¬ä¸€é˜¶æ®µï¼šæ³¨å†Œ
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1ï¸âƒ£  ç”¨æˆ·è®¿é—®æ³¨å†Œé¡µé¢
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  /register          â”‚
    â”‚                     â”‚
    â”‚  ğŸ“ Email:          â”‚
    â”‚  â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢           â”‚
    â”‚  ğŸ”’ Password:       â”‚
    â”‚  â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢           â”‚
    â”‚                     â”‚
    â”‚  [Create Account]   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â†“
            
2ï¸âƒ£  å‰ç«¯è°ƒç”¨ Supabase signUp
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ supabase.auth.signUp({                   â”‚
    â”‚   email,                                 â”‚
    â”‚   password,                              â”‚
    â”‚   options: {                             â”‚
    â”‚     emailRedirectTo: '/auth/callback'    â”‚
    â”‚   }                                      â”‚
    â”‚ })                                       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â†“
            
3ï¸âƒ£  Supabase åç«¯å¤„ç†
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ âœ… åˆ›å»ºç”¨æˆ·è®°å½• (auth.users)              â”‚
    â”‚ âœ… ç”ŸæˆéªŒè¯ token                         â”‚
    â”‚ âœ… å‘é€éªŒè¯é‚®ä»¶                           â”‚
    â”‚ â³ ç”¨æˆ·çŠ¶æ€: email_confirmed_at = NULL   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â†“
            
4ï¸âƒ£  å‰ç«¯è·³è½¬åˆ°æç¤ºé¡µé¢
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  /check-email       â”‚
    â”‚                     â”‚
    â”‚  ğŸ“§                 â”‚
    â”‚  Check Your Email   â”‚
    â”‚                     â”‚
    â”‚  Please check your  â”‚
    â”‚  email to verify    â”‚
    â”‚  your account.      â”‚
    â”‚                     â”‚
    â”‚  [Back to Login]    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


ç¬¬äºŒé˜¶æ®µï¼šé‚®ä»¶å‘é€
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

5ï¸âƒ£  ç”¨æˆ·æ”¶åˆ°é‚®ä»¶
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  æ”¶ä»¶ç®± ğŸ“¬                               â”‚
    â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
    â”‚  From: StarPlan <noreply@starplan.com>  â”‚
    â”‚  Subject: Verify Your Email             â”‚
    â”‚                                         â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
    â”‚  â”‚  Welcome to StarPlan! ğŸ‰          â”‚ â”‚
    â”‚  â”‚                                   â”‚ â”‚
    â”‚  â”‚  Please verify your email:        â”‚ â”‚
    â”‚  â”‚                                   â”‚ â”‚
    â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
    â”‚  â”‚  â”‚  Verify Email Address       â”‚ â”‚ â”‚
    â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
    â”‚  â”‚                                   â”‚ â”‚
    â”‚  â”‚  Or copy this link:              â”‚ â”‚
    â”‚  â”‚  https://...                     â”‚ â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â†“ (ç”¨æˆ·ç‚¹å‡»æŒ‰é’®)


ç¬¬ä¸‰é˜¶æ®µï¼šéªŒè¯ & è·³è½¬
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

6ï¸âƒ£  ç‚¹å‡»é“¾æ¥è·³è½¬
    URL: https://your-domain.com/auth/callback
         ?code=abc123xyz
         &next=/onboarding
         
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  /auth/callback/route.ts                 â”‚
    â”‚                                          â”‚
    â”‚  1. è·å– code å‚æ•°                        â”‚
    â”‚  2. è·å– next å‚æ•° (/onboarding)         â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â†“
            
7ï¸âƒ£  äº¤æ¢ code ä¸º session
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ supabase.auth.exchangeCodeForSession()   â”‚
    â”‚                                          â”‚
    â”‚ âœ… éªŒè¯ code æœ‰æ•ˆæ€§                       â”‚
    â”‚ âœ… åˆ›å»ºç”¨æˆ· session                       â”‚
    â”‚ âœ… æ›´æ–°: email_confirmed_at = NOW()      â”‚
    â”‚ âœ… ä¿å­˜ token åˆ° localStorage            â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â†“
            
8ï¸âƒ£  é‡å®šå‘åˆ° onboarding
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  /onboarding        â”‚
    â”‚                     â”‚
    â”‚  ğŸ‰ Welcome!        â”‚
    â”‚                     â”‚
    â”‚  Complete your      â”‚
    â”‚  profile to get     â”‚
    â”‚  started.           â”‚
    â”‚                     â”‚
    â”‚  [Continue â†’]       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â†“
            
9ï¸âƒ£  ç”¨æˆ·å¼€å§‹ä½¿ç”¨åº”ç”¨ âœ¨


é”™è¯¯å¤„ç†æµç¨‹
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âŒ éªŒè¯å¤±è´¥
    â†“
    /login?error=verification_failed
    â†“
    æ˜¾ç¤ºé”™è¯¯æç¤º
    â†“
    ç”¨æˆ·å¯ä»¥é‡æ–°ç™»å½•æˆ–é‡æ–°æ³¨å†Œ
```

---

## ğŸ”— URL å˜åŒ–æµç¨‹

```
æ³¨å†Œé˜¶æ®µï¼š
http://localhost:3000/register
                â†“
http://localhost:3000/check-email

é‚®ä»¶é“¾æ¥ï¼š
https://nhutoqszfhpszxyjddmm.supabase.co/auth/v1/verify
  ?token=abc123...
  &type=signup
  &redirect_to=http://localhost:3000/auth/callback?next=/onboarding

é‡å®šå‘åï¼š
http://localhost:3000/auth/callback
  ?code=xyz789...
  &next=/onboarding

æœ€ç»ˆè·³è½¬ï¼š
http://localhost:3000/onboarding
```

---

## ğŸ“Š æ•°æ®åº“çŠ¶æ€å˜åŒ–

```sql
-- æ³¨å†Œæ—¶ (æœªéªŒè¯)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ auth.users                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ email:              user@example.com                 â”‚
â”‚ email_confirmed_at: NULL                             â”‚
â”‚ confirmed_at:       NULL                             â”‚
â”‚ created_at:         2024-12-08 10:00:00             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

-- éªŒè¯å (å·²éªŒè¯)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ auth.users                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ email:              user@example.com                 â”‚
â”‚ email_confirmed_at: 2024-12-08 10:05:00             â”‚
â”‚ confirmed_at:       2024-12-08 10:05:00             â”‚
â”‚ created_at:         2024-12-08 10:00:00             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” Token & Session æµç¨‹

```
1ï¸âƒ£  æ³¨å†Œæ—¶
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Supabase ç”Ÿæˆ:                      â”‚
    â”‚ - Verification Token (ä¸€æ¬¡æ€§)       â”‚
    â”‚ - åµŒå…¥åˆ°é‚®ä»¶é“¾æ¥ä¸­                   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

2ï¸âƒ£  ç‚¹å‡»é‚®ä»¶é“¾æ¥
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Supabase éªŒè¯ token:                â”‚
    â”‚ - æ£€æŸ¥ token æ˜¯å¦æœ‰æ•ˆ               â”‚
    â”‚ - æ£€æŸ¥æ˜¯å¦è¿‡æœŸ                      â”‚
    â”‚ - ç”Ÿæˆä¸€æ¬¡æ€§ code                   â”‚
    â”‚ - é‡å®šå‘åˆ° /auth/callback           â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

3ï¸âƒ£  exchangeCodeForSession
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ å‰ç«¯äº¤æ¢ code:                      â”‚
    â”‚ - éªŒè¯ code                         â”‚
    â”‚ - ç”Ÿæˆ access_token                 â”‚
    â”‚ - ç”Ÿæˆ refresh_token                â”‚
    â”‚ - ä¿å­˜åˆ° localStorage               â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ localStorage:                       â”‚
    â”‚ â”œâ”€ supabase.auth.token              â”‚
    â”‚ â”‚  â”œâ”€ access_token (1å°æ—¶)          â”‚
    â”‚ â”‚  â””â”€ refresh_token (æ°¸ä¹…)          â”‚
    â”‚ â””â”€ supabase.auth.expires_at         â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

4ï¸âƒ£  åç»­è¯·æ±‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ è‡ªåŠ¨é™„åŠ  token:                     â”‚
    â”‚ Authorization: Bearer <access_tok>  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## â±ï¸ æ—¶é—´çº¿ç¤ºä¾‹

```
00:00 - ç”¨æˆ·è®¿é—® /register
00:01 - å¡«å†™è¡¨å•å¹¶æäº¤
00:02 - è·³è½¬åˆ° /check-email
00:03 - é‚®ä»¶å‘é€ (Supabase)
00:04 - ç”¨æˆ·æ”¶åˆ°é‚®ä»¶
00:05 - ç”¨æˆ·æ‰“å¼€é‚®ä»¶
00:06 - ç‚¹å‡»éªŒè¯é“¾æ¥
00:07 - è·³è½¬åˆ° /auth/callback
00:08 - éªŒè¯ code å¹¶åˆ›å»º session
00:09 - è‡ªåŠ¨è·³è½¬åˆ° /onboarding
00:10 - ç”¨æˆ·å¼€å§‹ä½¿ç”¨ âœ¨
```

---

## ğŸ“± å¤šè®¾å¤‡åœºæ™¯

### åœºæ™¯ 1: æ‰‹æœºæ³¨å†Œï¼Œæ‰‹æœºéªŒè¯ âœ…
```
ğŸ“± æ‰‹æœºæµè§ˆå™¨
    â†“ æ³¨å†Œ
ğŸ“§ æ‰‹æœºé‚®ç®± App
    â†“ ç‚¹å‡»é“¾æ¥
ğŸ“± æ‰‹æœºæµè§ˆå™¨ (è‡ªåŠ¨æ‰“å¼€)
    â†“ éªŒè¯æˆåŠŸ
âœ… å¼€å§‹ä½¿ç”¨
```

### åœºæ™¯ 2: ç”µè„‘æ³¨å†Œï¼Œæ‰‹æœºéªŒè¯ âœ…
```
ğŸ’» ç”µè„‘æµè§ˆå™¨
    â†“ æ³¨å†Œ
ğŸ“± æ‰‹æœºé‚®ç®± App
    â†“ ç‚¹å‡»é“¾æ¥
ğŸ“± æ‰‹æœºæµè§ˆå™¨ (æ‰“å¼€é“¾æ¥)
    â†“ éªŒè¯æˆåŠŸ
âœ… æ‰‹æœºä¸Šå·²ç™»å½•
ğŸ’» ç”µè„‘éœ€è¦é‡æ–°ç™»å½• (è¾“å…¥é‚®ç®±å¯†ç )
```

### åœºæ™¯ 3: ç”µè„‘æ³¨å†Œï¼Œç”µè„‘éªŒè¯ âœ…
```
ğŸ’» ç”µè„‘æµè§ˆå™¨ (Tab 1: /check-email)
ğŸ“§ ç”µè„‘é‚®ç®± (Tab 2: æ‰“å¼€é‚®ä»¶)
    â†“ ç‚¹å‡»é“¾æ¥
ğŸ’» ç”µè„‘æµè§ˆå™¨ (Tab 3: è‡ªåŠ¨æ‰“å¼€)
    â†“ éªŒè¯æˆåŠŸ
âœ… Tab 1 å’Œ Tab 3 éƒ½å·²ç™»å½• (å…±äº« localStorage)
```

---

## ğŸ¨ UI ç»„ä»¶æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     ç»„ä»¶å±‚çº§ç»“æ„                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

PageTransition
  â””â”€ AuthLayout
      â””â”€ RegisterForm
          â”œâ”€ EmailInput
          â”œâ”€ PasswordInput
          â”œâ”€ ConfirmPasswordInput
          â”œâ”€ SubmitButton
          â””â”€ GoogleButton

                â†“ (æ³¨å†ŒæˆåŠŸ)

PageTransition
  â””â”€ AuthLayout
      â””â”€ CheckEmailContent
          â”œâ”€ EmailIcon
          â”œâ”€ Title
          â”œâ”€ Description
          â”œâ”€ Instructions
          â”œâ”€ HelpText
          â””â”€ BackToLoginLink

                â†“ (éªŒè¯æˆåŠŸ)

PageTransition
  â””â”€ OnboardingLayout
      â””â”€ OnboardingSteps
          â”œâ”€ Step1: Personal Info
          â”œâ”€ Step2: Work Experience
          â”œâ”€ Step3: Skills
          â””â”€ Step4: Preferences
```

---

## ğŸ”„ çŠ¶æ€ç®¡ç†æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    React State Flow                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

register/page.tsx:
  â””â”€ useState
      â”œâ”€ email: ''
      â”œâ”€ password: ''
      â”œâ”€ confirmPassword: ''
      â”œâ”€ error: ''
      â””â”€ isLoading: false

check-email/page.tsx:
  â””â”€ usePageAnimation()
      â””â”€ mounted: true/false

auth/callback/route.ts:
  â””â”€ Server Component (æ— çŠ¶æ€)
      â”œâ”€ è¯»å– URL params
      â”œâ”€ è°ƒç”¨ Supabase API
      â””â”€ æ‰§è¡Œé‡å®šå‘

onboarding/page.tsx:
  â””â”€ useUser() hook
      â”œâ”€ user: User | null
      â”œâ”€ loading: boolean
      â””â”€ error: Error | null
```

---

## ğŸ§ª æµ‹è¯•åœºæ™¯è¦†ç›–

```
âœ… æ­£å¸¸æµç¨‹
  â””â”€ æ³¨å†Œ â†’ æ”¶åˆ°é‚®ä»¶ â†’ éªŒè¯ â†’ è·³è½¬

âœ… é‚®ä»¶æœªæ”¶åˆ°
  â””â”€ æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯ â†’ æ£€æŸ¥åƒåœ¾ç®±

âœ… éªŒè¯é“¾æ¥è¿‡æœŸ
  â””â”€ è·³è½¬åˆ°é”™è¯¯é¡µ â†’ æç¤ºé‡æ–°æ³¨å†Œ

âœ… é‡å¤æ³¨å†Œ
  â””â”€ æ˜¾ç¤ºé”™è¯¯: "Email already registered"

âœ… éªŒè¯ååˆ·æ–°é¡µé¢
  â””â”€ Session ä¾ç„¶æœ‰æ•ˆ â†’ ä¿æŒç™»å½•

âœ… éªŒè¯å‰å°è¯•ç™»å½•
  â””â”€ æ˜¾ç¤ºé”™è¯¯: "Email not confirmed"

âœ… å¤šæ ‡ç­¾é¡µåŒæ­¥
  â””â”€ ä¸€ä¸ªæ ‡ç­¾éªŒè¯ â†’ å…¶ä»–æ ‡ç­¾è‡ªåŠ¨ç™»å½•
```

---

## ğŸ¯ å…³é”®ä»£ç ä½ç½®

```
ğŸ“ src/app/
  â”œâ”€ register/page.tsx           [æ³¨å†Œè¡¨å•]
  â”‚   â””â”€ Line 52-58: signUp é…ç½®
  â”‚
  â”œâ”€ check-email/page.tsx         [æç¤ºé¡µé¢]
  â”‚   â””â”€ Line 1-72: å®Œæ•´é¡µé¢
  â”‚
  â”œâ”€ auth/callback/route.ts       [éªŒè¯å›è°ƒ]
  â”‚   â”œâ”€ Line 10: è·å– code
  â”‚   â”œâ”€ Line 11: è·å– next
  â”‚   â”œâ”€ Line 20: exchangeCodeForSession
  â”‚   â””â”€ Line 23: é‡å®šå‘
  â”‚
  â””â”€ onboarding/page.tsx          [å¼•å¯¼é¡µé¢]
      â””â”€ useUser() æ£€æŸ¥ç™»å½•çŠ¶æ€
```

---

## ğŸ“š ç›¸å…³æ–‡æ¡£é€ŸæŸ¥

| æ–‡æ¡£ | ç”¨é€” |
|------|------|
| `EMAIL_VERIFICATION_QUICK_GUIDE.md` | âš¡ 5åˆ†é’Ÿå¿«é€Ÿé…ç½® |
| `EMAIL_VERIFICATION_SETUP.md` | ğŸ“– å®Œæ•´é…ç½®æ–‡æ¡£ |
| `EMAIL_VERIFICATION_IMPLEMENTATION.md` | ğŸ“ å®ç°æ€»ç»“ |
| `EMAIL_VERIFICATION_FLOW.md` | ğŸ“Š æµç¨‹å¯è§†åŒ– (æœ¬æ–‡æ¡£) |
| `DISABLE_EMAIL_VERIFICATION.md` | ğŸ”§ ç¦ç”¨éªŒè¯æŒ‡å— |

---

## âœ¨ æ€»ç»“

è¿™ä¸ªæµç¨‹å›¾å±•ç¤ºäº†ä»ç”¨æˆ·æ³¨å†Œåˆ°éªŒè¯å®Œæˆçš„å®Œæ•´æµç¨‹ï¼š

1. **æ¸…æ™°çš„æ­¥éª¤** - 9ä¸ªä¸»è¦æ­¥éª¤ï¼Œç¯ç¯ç›¸æ‰£
2. **å®Œå–„çš„é”™è¯¯å¤„ç†** - æ¯ä¸ªç¯èŠ‚éƒ½æœ‰å¤±è´¥å¤„ç†
3. **ä¼˜ç§€çš„ç”¨æˆ·ä½“éªŒ** - å‹å¥½çš„æç¤ºå’Œè‡ªåŠ¨è·³è½¬
4. **å®‰å…¨çš„éªŒè¯æœºåˆ¶** - ä¸€æ¬¡æ€§ tokenï¼Œè‡ªåŠ¨è¿‡æœŸ

**ç°åœ¨å°±å¼€å§‹æµ‹è¯•å§ï¼** ğŸš€

å‚è€ƒ `EMAIL_VERIFICATION_QUICK_GUIDE.md` å®Œæˆ Supabase é…ç½®ã€‚


